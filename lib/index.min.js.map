{"version":3,"file":"index.min.js","sources":["../src/helpers/deep-assign.ts","../src/context.tsx","../src/helpers/reducer-logger.ts"],"sourcesContent":["import { Context } from '../context';\n\nexport function deepAssign(target: Context, ...sources: Context[]): Context {\n  for (const source of sources) {\n    for (const key in source) {\n      const s = source[key];\n      if (Object(s) === s) {\n        const t = target[key];\n        if (Object(t) === t) {\n          target[key] = Object.create(deepAssign(t, s));\n          continue;\n        }\n        target[key] = Object.create(deepAssign({}, s));\n        continue;\n      }\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n","import React, { createContext, useContext, useReducer } from 'react';\nimport { deepAssign } from './helpers';\n\nexport * from './helpers';\n\nexport interface Context {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: Context | any;\n}\n\nexport interface Action extends Context {\n  type: string;\n}\n\nexport type Dispatch = React.Dispatch<Action>;\nexport type Reducer = React.Reducer<Context, Action>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Selector<C = Context> = (state: Context) => C | any;\n\nexport interface ContextProps {\n  state: Context;\n  dispatch: Dispatch;\n}\n\nexport interface StoreProps {}\n\nconst rootSelector: Selector = (state) => state;\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction createStore(reducer: Reducer, initialState: Context) {\n  const Context = createContext<ContextProps>({\n    state: {},\n    dispatch: () => {}, // eslint-disable-line @typescript-eslint/no-empty-function\n  });\n\n  const Store: React.FC<StoreProps> = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, deepAssign({} ,initialState));\n\n    return (\n      <Context.Provider value={{ state, dispatch }}>\n        {children}\n      </Context.Provider>\n    );\n  };\n\n  function useStore<C = Context>(\n    selector: Selector<C> = rootSelector\n  ): [C, Dispatch] {\n    const { state, dispatch } = useContext(Context);\n    return [selector(state), dispatch];\n  }\n\n  function useDispatch(): Dispatch {\n    const { dispatch } = useContext(Context);\n    return dispatch;\n  }\n\n  function useState<C = Context>(\n    selector: Selector<C> = rootSelector\n  ): C {\n    const { state } = useContext(Context);\n    return selector(state);\n  }\n\n  return { Store, useStore, useDispatch, useState };\n}\n\nexport { createStore };\n","import { Action, Context, Reducer } from '../context';\n\nexport const reducerLogger = (reducer: Reducer, description: string = 'context'): Reducer => {\n  return (state: Context, action: Action) => {\n    const log: any = {};\n    log.actions = JSON.parse(JSON.stringify(action));\n    log.before = JSON.parse(JSON.stringify(state));\n    const after = reducer(state, action);\n    log.after = JSON.parse(JSON.stringify(after));\n    console.log(description, log);\n    return after;\n  };\n};\n"],"names":["deepAssign","target","_i","sources","sources_1","_a","source","key","s","Object","t","create","rootSelector","state","reducer","initialState","Context","createContext","dispatch","Store","children","_b","useReducer","React","Provider","value","useStore","selector","useContext","useDispatch","useState","description","action","log","actions","JSON","parse","stringify","before","after","console"],"mappings":"uLAEgBA,EAAWC,OAAiB,aAAAC,mBAAAA,IAAAC,oBAC1C,IAAqB,QAAAC,IAAAC,WAAAA,IAAS,CAAzB,IAAMC,OACT,IAAK,IAAMC,KAAOD,EAAQ,CACxB,IAAME,EAAIF,EAAOC,GACjB,GAAIE,OAAOD,KAAOA,EASlBP,EAAOM,GAAOD,EAAOC,OATrB,CACE,IAAMG,EAAIT,EAAOM,GACjB,GAAIE,OAAOC,KAAOA,EAAG,CACnBT,EAAOM,GAAOE,OAAOE,OAAOX,EAAWU,EAAGF,IAC1C,SAEFP,EAAOM,GAAOE,OAAOE,OAAOX,EAAW,GAAIQ,MAMjD,OAAOP,MCQHW,EAAyB,SAACC,GAAU,OAAAA,uBAG1C,SAAqBC,EAAkBC,GACrC,IAAMC,EAAUC,gBAA4B,CAC1CJ,MAAO,GACPK,SAAU,eAgCZ,MAAO,CAAEC,MA7B2B,SAACd,OAAEe,aAC/BC,EAAoBC,aAAWR,EAASd,EAAW,GAAIe,IAAtDF,OAAOK,OAEd,OACEK,wBAACP,EAAQQ,UAASC,MAAO,CAAEZ,QAAOK,aAC/BE,IAwBSM,SAnBhB,SACEC,gBAAAA,KAEM,IAAAtB,EAAsBuB,aAAWZ,GAA/BH,UAAOK,aACf,MAAO,CAACS,EAASd,GAAQK,IAeDW,YAZ1B,WAEE,OADqBD,aAAWZ,aAWKc,SAPvC,SACEH,GAGA,oBAHAA,KAGOA,EADWC,aAAWZ,wDC1DJ,SAACF,EAAkBiB,GAC9C,oBAD8CA,aACvC,SAAClB,EAAgBmB,GACtB,IAAMC,EAAW,GACjBA,EAAIC,QAAUC,KAAKC,MAAMD,KAAKE,UAAUL,IACxCC,EAAIK,OAASH,KAAKC,MAAMD,KAAKE,UAAUxB,IACvC,IAAM0B,EAAQzB,EAAQD,EAAOmB,GAG7B,OAFAC,EAAIM,MAAQJ,KAAKC,MAAMD,KAAKE,UAAUE,IACtCC,QAAQP,IAAIF,EAAaE,GAClBM"}